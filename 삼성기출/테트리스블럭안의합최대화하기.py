n, m = map(int, input().split())
matrix = [list(map(int, input().split())) for _ in range(n)]

blocks = [[(0, 0), (0, 1), (0, 2), (0, 3)], [(0, 0), (1, 0), (2, 0), (3, 0)],
[(0, 0), (0, 1), (1, 0), (1, 1)], [(0, 0), (1, 0), (1, 1), (2, 1)], [(0, 1), (1, 1), (1, 0), (2, 0)],
[(0, 1), (0, 2), (1, 0), (1, 1)], [(0, 0), (0, 1), (1, 1), (1, 2)], [(0, 0), (1, 0), (2, 0), (2, 1)],
[(0, 1), (1, 1), (2, 1), (2, 0)], [(0, 0), (1, 0), (1, 1), (1, 2)], [(1, 0), (1, 1), (1, 2), (0, 2)],
[(0, 0), (0, 1), (1, 0), (2, 0)], [(0 ,0), (0, 1), (1, 1), (2, 1)], [(0, 0), (0, 1), (0, 2), (1, 0)],
[(0, 0), (0, 1), (0, 2), (1, 2)], [(0, 0), (1, 0), (1, 1), (2, 0)], [(1, 0), (0, 1), (1, 1), (2, 1)],
[(0, 1), (1, 0), (1, 1), (1, 2)], [(0, 0), (0, 1), (0, 2), (1, 1)]]

biggest = -float('inf')
for block in blocks:
    for i in range(n):
        for j in range(m):
            total = 0
            for di, dj in block:
                if 0 <= i + di < n and 0 <= j + dj < m:
                    total += matrix[i+di][j+dj]
                else:
                    break
            else:
                biggest = max(biggest, total)

print(biggest)